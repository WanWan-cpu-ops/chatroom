<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DaiP 智能聊天室</title>
    <link rel="stylesheet" href="/static/css/style.css?v=2.4">
    <link rel="stylesheet" href="/static/css/scrollbar.css?v=2.4">
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="screen active">
        <div class="login-bg-decoration"></div>
        <div class="login-card">
            <div class="logo-area">
                <h1>DaiP</h1>
                <p>带派AI聊天室</p>
            </div>
            <div class="form-group">
                <label>用户名</label>
                <input type="text" id="username-input" placeholder="请输入您的用户名" maxlength="15">
            </div>
            <div class="form-group">
                <label>密码</label>
                <input type="password" id="password-input" placeholder="请输入您的密码">
            </div>
            <div class="form-group">
                <label>服务器</label>
                <div class="select-wrapper">
                    <select id="server-select">
                        <option value="" disabled selected>加载中...</option>
                    </select>
                    <button id="refresh-server-btn" class="icon-btn" title="刷新服务器列表">
                        <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <polyline points="1 20 1 14 7 14"></polyline>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <button id="login-btn">登录</button>
            <p id="login-error" class="error-msg"></p>
            <div class="auth-switch">
                <span>还没有账号？</span>
                <button id="switch-to-register" class="switch-btn">立即注册</button>
            </div>
        </div>
    </div>

    <!-- Register Screen -->
    <div id="register-screen" class="screen">
        <div class="login-bg-decoration"></div>
        <div class="login-card">
            <div class="logo-area">
                <h1>DaiP</h1>
                <p>带派AI聊天室</p>
            </div>
            <div class="form-group">
                <label>用户名</label>
                <input type="text" id="register-username-input" placeholder="请输入您的用户名" maxlength="15">
            </div>
            <div class="form-group">
                <label>密码</label>
                <input type="password" id="register-password-input" placeholder="请输入您的密码">
            </div>
            <div class="form-group">
                <label>确认密码</label>
                <input type="password" id="register-confirm-password-input" placeholder="请再次输入您的密码">
            </div>
            <button id="register-btn">注册</button>
            <p id="register-error" class="error-msg"></p>
            <div class="auth-switch">
                <span>已有账号？</span>
                <button id="switch-to-login" class="switch-btn">立即登录</button>
            </div>
        </div>
    </div>

    <!-- Chat Screen -->
    <div id="chat-screen" class="screen">
        <div class="container">
            <!-- Left Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h3>在线用户</h3>
                    <div class="online-indicator">
                        <div class="online-dot"></div>
                        <span id="user-count">0</span>
                    </div>
                </div>
                <div class="online-users" id="online-users"></div>
            </div>
            
            <!-- Main Chat Area -->
            <div class="main-chat">
                <div class="chat-header">
                    <div class="chat-info">
                        <h2>公共频道</h2>
                        <p>欢迎来到 DaiP 智能聊天室</p>
                    </div>
                    <button id="logout-btn" class="logout-btn">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                    </button>
                </div>

                <div class="chat-messages" id="chat-messages">
                    <!-- Messages injected here -->
                    <div class="message system">
                        <div class="content">欢迎加入聊天室！尝试发送 @电影 [url] 或 @川小农 [message]</div>
                    </div>
                </div>

                <div class="chat-input-area">
                    <div class="toolbar">
                        <button id="emoji-btn" class="tool-btn" title="发送表情">😊</button>
                        <button class="tool-btn" title="视频指令" onclick="insertCommand('@电影 ')">🎬</button>
                        <button class="tool-btn" title="AI对话" onclick="insertCommand('@川小农 ')">🤖</button>
                        <button class="tool-btn" title="音乐指令" onclick="insertCommand('@音乐 ')">🎵</button>
                        <button class="tool-btn" title="天气查询" onclick="insertCommand('@天气 ')">🌤️</button>
                        <button class="tool-btn" title="新闻查询" onclick="insertCommand('@新闻 ')">📰</button>
                    </div>
                    <div class="input-wrapper">
                        <textarea id="message-input" placeholder="输入消息..." rows="1"></textarea>
                        <button id="send-btn" class="send-btn">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                        </button>
                    </div>
                    
                    <!-- Emoji Picker Popover --> 
                     <div id="emoji-picker" class="emoji-picker hidden"> 
                         <div class="emoji-grid"> 
                             <span>😀</span><span>😃</span><span>😄</span><span>😁</span><span>😆</span> 
                             <span>😅</span><span>😂</span><span>🤣</span><span>😊</span><span>😇</span> 
                             <span>🙂</span><span>🙃</span><span>😉</span><span>😌</span><span>😍</span> 
                             <span>🥰</span><span>😘</span><span>😗</span><span>😙</span><span>😚</span> 
                             <span>😋</span><span>😛</span><span>😝</span><span>😜</span><span>🤪</span> 
                             <span>🤨</span><span>🧐</span><span>🤓</span><span>😎</span><span>🤩</span> 
                             <span>🥳</span><span>😏</span><span>😒</span><span>😞</span><span>😔</span> 
                             <span>😟</span><span>😕</span><span>🙁</span><span>☹️</span><span>😣</span> 
                             <span>😖</span><span>😫</span><span>😩</span><span>🥺</span><span>😢</span> 
                             <span>😭</span><span>😤</span><span>😠</span><span>😡</span><span>🤬</span> 
                             <span>👍</span><span>👎</span><span>👌</span><span>✌️</span><span>🤞</span> 
                             <span>🤝</span><span>👋</span><span>🎬</span><span>🤖</span><span>🔥</span> 
                         </div> 
                     </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/main.js"></script>
</body>
</html>
