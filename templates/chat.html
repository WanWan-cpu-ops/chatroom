<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DaiP 智能聊天室 - 聊天</title>
    <link rel="stylesheet" href="/static/css/common.css?v={{ version }}">
    <link rel="stylesheet" href="/static/css/chat.css?v={{ version }}">
    <link rel="stylesheet" href="/static/css/scrollbar.css?v={{ version }}">
    <link rel="stylesheet" href="/static/css/weather-effects.css?v={{ version }}">
</head>
<body>
    <!-- 聊天界面 -->
    <div id="chat-screen" class="screen active">
        <div class="container">
            <!-- 侧边栏 -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="avatar-circle" id="my-avatar"></div>
                    <div class="user-info">
                        <h3 id="my-nickname">User</h3>
                        <span class="status-dot online"></span> 在线
                    </div>
                    <button id="logout-btn" class="logout-btn">退出</button>
                </div>
                
                <div class="sidebar-section">
                    <h4>在线用户 (<span id="user-count">0</span>)</h4>
                    <div class="user-list" id="online-users">
                        <!-- User items injected here -->
                    </div>
                </div>


            </div>

            <!-- 主聊天区域 -->
            <div class="main-chat">
                <div class="chat-header">
                    <div class="chat-info">
                        <h2>公共频道</h2>
                        <p>欢迎来到 DaiP 智能聊天室</p>
                    </div>
                </div>

                <div class="chat-messages" id="chat-messages">
                    <!-- 消息将被注入此处 -->
                    <div class="message system">
                        <div class="content">欢迎加入聊天室！尝试发送 @电影 [url] 或 @川小农 [message]</div>
                    </div>
                </div>

                <div class="chat-input-area">
                    <div class="toolbar">
                        <button id="emoji-btn" class="tool-btn" title="发送表情">😊</button>
                        <button class="tool-btn" title="电影指令" onclick="insertCommand('@电影 ')">🎬</button>
                        <button class="tool-btn" title="AI对话" onclick="insertCommand('@川小农 ')">🤖</button>
                        <button class="tool-btn" title="新闻指令" onclick="insertCommand('@新闻')">📰</button>
                        <button id="weather-test-btn" class="tool-btn" title="测试天气特效">🌤️</button>
                    </div>
                    <div class="input-wrapper">
                        <textarea id="message-input" placeholder="输入消息..." rows="1"></textarea>
                        <button id="send-btn" class="send-btn">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                        </button>
                    </div>
                    
                    <!-- 表情选择器弹窗 -->
                    <div id="emoji-picker" class="emoji-picker hidden">
                        <div class="emoji-grid">
                            <span>😀</span><span>😃</span><span>😄</span><span>😁</span><span>😆</span>
                            <span>😅</span><span>😂</span><span>🤣</span><span>😊</span><span>😇</span>
                            <span>🙂</span><span>🙃</span><span>😉</span><span>😌</span><span>😍</span>
                            <span>🥰</span><span>😘</span><span>😗</span><span>😙</span><span>😚</span>
                            <span>😋</span><span>😛</span><span>😝</span><span>😜</span><span>🤪</span>
                            <span>🤨</span><span>🧐</span><span>🤓</span><span>😎</span><span>🤩</span>
                            <span>🥳</span><span>😏</span><span>😒</span><span>😞</span><span>😔</span>
                            <span>😟</span><span>😕</span><span>🙁</span><span>☹️</span><span>😣</span>
                            <span>😖</span><span>😫</span><span>😩</span><span>🥺</span><span>😢</span>
                            <span>😭</span><span>😤</span><span>😠</span><span>😡</span><span>🤬</span>
                            <span>👍</span><span>👎</span><span>👌</span><span>✌️</span><span>🤞</span>
                            <span>🤝</span><span>👋</span><span>🎬</span><span>🤖</span><span>🔥</span>
                        </div>
                    </div>
                    
                    <!-- 天气特效测试弹窗 -->
                    <div id="weather-test-picker" class="weather-picker hidden">
                        <h4>测试天气特效</h4>
                        <div class="weather-buttons">
                            <button class="weather-btn" data-weather="sunny">晴天</button>
                            <button class="weather-btn" data-weather="cloudy">多云</button>
                            <button class="weather-btn" data-weather="overcast">阴天</button>
                            <button class="weather-btn" data-weather="rain">雨天</button>
                            <button class="weather-btn" data-weather="snow">雪天</button>
                            <button class="weather-btn" data-weather="fog">雾霾</button>
                            <button class="weather-btn" data-weather="thunderstorm">雷阵雨</button>
                            <button class="weather-btn" data-weather="stop">停止特效</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/static/js/chat.js?v={{ version }}"></script>
</body>
</html>